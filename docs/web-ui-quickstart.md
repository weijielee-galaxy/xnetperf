# 🚀 xnetperf Web UI 快速开始

## 启动服务器

```bash
# 方式1：默认端口 8080
./build/xnetperf server

# 方式2：指定端口
./build/xnetperf server --port 9000
```

## 访问界面

打开浏览器访问：**http://localhost:8080/**

服务器会自动显示访问地址：

```
HTTP Server starting on http://localhost:8080

🌐 Web UI:
  http://localhost:8080/

📡 API Endpoints:
  GET    /health
  GET    /api/configs
  ...
```

## 界面预览

```
┌─────────────────────────────────────────────────────────────┐
│  🚀 xnetperf 配置管理                                        │
├─────────────┬───────────────────────────────────────────────┤
│             │                                               │
│ [+ 新建配置] │  📝 config.yaml                               │
│             │  [验证配置] [取消] [保存]                       │
│ ⭐ config.yaml│  ═══════════════════════════════════════════  │
│ (激活)       │                                               │
│             │  【基础配置】                                   │
│ 📄 test.yaml │  起始端口 (start_port)                         │
│     [删除]   │  ┌─────────┐                                  │
│             │  │ 20000   │                                  │
│ 📄 prod.yaml │  └─────────┘                                  │
│     [删除]   │  流类型 (stream_type)                          │
│             │  ┌──────────▼┐                                 │
│             │  │ InCast    │                                 │
│             │  └───────────┘                                 │
│             │                                               │
│             │  【服务器配置 (server)】                        │
│             │  主机名列表 (hostname)                          │
│             │  [host1] [host2] [+]                          │
│             │                                               │
└─────────────┴───────────────────────────────────────────────┘
```

## 基本操作

### 1️⃣ 创建新配置
1. 点击 **[+ 新建配置]** 按钮
2. 输入文件名，例如：`my-test`（自动添加 .yaml）
3. 点击 **创建**
4. 开始编辑新配置

### 2️⃣ 编辑配置
1. 在左侧点击配置文件名
2. 在右侧表单中修改字段
3. 点击 **验证配置** 检查是否正确
4. 点击 **保存** 保存更改

### 3️⃣ 添加主机名/HCA
1. 找到 hostname 或 hca 字段
2. 点击 **[+]** 按钮
3. 输入值后按 **Enter** 或点击外部
4. 点击标签的 **×** 删除

### 4️⃣ 删除配置
1. 鼠标悬停在配置文件上
2. 点击右侧的 **删除** 按钮
3. 确认删除操作
   
   ⚠️ 注意：默认配置 `config.yaml` 无法删除

## 配置字段速查

| 字段 | 类型 | 说明 |
|------|------|------|
| start_port | 数字 | 起始端口（1-65535）|
| stream_type | 选择 | fullmesh/incast/p2p |
| qp_num | 数字 | 队列对数量 |
| message_size_bytes | 数字 | 消息大小（字节）|
| speed | 数字 | 速度（Gbps）|
| rdma_cm | 开关 | 是否使用 RDMA CM |
| report.enable | 开关 | 是否启用报告 |
| report.dir | 文本 | 报告保存目录 |
| run.infinitely | 开关 | 是否无限运行 |
| run.duration_seconds | 数字 | 运行时长（秒）|
| server.hostname | 列表 | 服务器主机名 |
| server.hca | 列表 | 服务器 HCA 设备 |
| client.hostname | 列表 | 客户端主机名 |
| client.hca | 列表 | 客户端 HCA 设备 |

## 常见问题

### Q: 为什么无法删除 config.yaml？
A: config.yaml 是默认配置文件，受保护不可删除。

### Q: 切换配置时提示"有未保存的修改"？
A: 当前配置有修改未保存，选择"继续"放弃修改，或"取消"返回保存。

### Q: 如何知道配置是否正确？
A: 点击 **验证配置** 按钮，系统会检查所有字段的合法性。

### Q: infinitely 开关启用后，duration_seconds 无法修改？
A: 这是正常的。无限运行模式下不需要指定运行时长。

### Q: 可以批量添加主机名吗？
A: 目前需要逐个添加。未来版本会支持批量输入。

## 快捷提示

💡 **推荐工作流程**：
```
创建配置 → 编辑字段 → 验证配置 → 保存 → 使用
```

💡 **数据安全**：
- 切换配置前会检查未保存修改
- 点击"取消"可恢复原始数据
- 建议先验证再保存

💡 **输入技巧**：
- hostname 和 hca 按 Enter 快速添加
- 数字字段支持滚轮调整
- 开关字段单击切换

## 技术信息

- **前端框架**：Vue 3 + Element Plus
- **后端框架**：Gin (Go)
- **部署方式**：Go Embed（单一二进制）
- **浏览器要求**：现代浏览器（Chrome, Firefox, Safari, Edge）

## 更多帮助

- 📖 详细文档：`web/README.md`
- 📋 实现总结：`docs/v0.0.7-summary.md`
- 🔧 API 文档：`docs/http-server-api.md`

---

享受使用 xnetperf Web UI! 🎉
